# Makefile.build - ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»ä¾å­˜ç®¡ç†

.PHONY: build run build-prod fmt deps clean

build:
	@echo "ğŸ”¨ Hello World API ã‚’ãƒ“ãƒ«ãƒ‰ä¸­..."
	cd src && go build -o ../bin/hello-world-api main.go
	@echo "âœ… ãƒ“ãƒ«ãƒ‰å®Œäº†: bin/hello-world-api"

run:
	@echo "ğŸš€ Hello World API ã‚’èµ·å‹•ä¸­..."
	cd src && go run main.go

build-prod:
	@echo "ğŸ­ æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰ä¸­..."
	cd src && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o ../bin/hello-world-api main.go
	@echo "âœ… æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰å®Œäº†: bin/hello-world-api"

fmt:
	@echo "ğŸ¨ ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¸­..."
	go fmt ./...
	@echo "âœ… ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå®Œäº†"

deps:
	@echo "ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°ä¸­..."
	go mod tidy
	go mod download
	@echo "âœ… ä¾å­˜é–¢ä¿‚æ›´æ–°å®Œäº†"

clean:
	@echo "ğŸ§¹ ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ä¸­..."
	rm -rf bin/
	rm -f coverage.out coverage.html
	go clean
	@echo "âœ… ã‚¯ãƒªãƒ¼ãƒ³å®Œäº†" 